function _setTimer(e,t,r){var i=null;do i=Math.floor(4294967296*Math.random())+1;while(timers[i]);return timers[i]={type:e,callback:t,time:now+r+Math.floor(5*Math.random()),interval:"interval"==e?r:0},i}function _clearTimer(e,t){timers[t]&&timers[t].type==e&&delete timers[t]}function _setTimeout(e,t){return _setTimer("timeout",e,t)}function _setInterval(e,t){return _setTimer("interval",e,t)}function _clearTimeout(e){_clearTimer("timeout",e)}function _clearInterval(e){_clearTimer("interval",e)}function _runTimer(e){if(timers[e])if("timeout"==timers[e].type){var t=timers[e].callback;delete timers[e],t()}else"interval"==timers[e].type&&(timers[e].time=now+timers[e].interval+Math.floor(5*Math.random()),timers[e].callback())}function _runTimersOnce(){for(var e in timers)_runTimer(e)}function _runTimersToTime(e){var t=_getNextTimerToken();if(t){var r=timers[t].time;r>now+e?now+=e:(e-=r-now,now=r,_runTimer(t),_runTimersToTime(e))}}function _runTimersRepeatedly(){for(var e,t=1e3,r=0;t>r&&(e=_getNextTimerToken(),e);r++)_runTimer(e);if(r===t)throw new Error("More timers still exist after "+t+" timers!")}function _clearTimers(){for(var e in timers)delete timers[e]}function _getNextTimerToken(){var e=null,t=31536e6;for(var r in timers)timers[r].time<t&&(e=r,t=timers[r].time);return e}var mocks=require("mocks"),timers={},now=0,mockTimers={setTimeout:_setTimeout,clearTimeout:_clearTimeout,setInterval:_setInterval,clearInterval:_clearInterval,runTimersToTime:_runTimersToTime,runTimersOnce:_runTimersOnce,runTimersRepeatedly:_runTimersRepeatedly,clearTimers:_clearTimers,getTimersCount:function(){return Object.keys(timers).length}};module.exports.installMockTimers=function(e){e._originalTimeouts={setTimeout:e.setTimeout,clearTimeout:e.clearTimeout,setInterval:e.setInterval,clearInterval:e.clearInterval},e.setTimeout=mocks.getMockFunction().mockImplementation(mockTimers.setTimeout),e.clearTimeout=mocks.getMockFunction().mockImplementation(mockTimers.clearTimeout),e.setInterval=mocks.getMockFunction().mockImplementation(mockTimers.setInterval),e.clearInterval=mocks.getMockFunction().mockImplementation(mockTimers.clearInterval),e.mockRunTimersOnce=mocks.getMockFunction().mockImplementation(mockTimers.runTimersOnce),e.mockRunTimersToTime=mocks.getMockFunction().mockImplementation(mockTimers.runTimersToTime),e.mockRunTimersRepeatedly=mocks.getMockFunction().mockImplementation(mockTimers.runTimersRepeatedly),e.mockClearTimers=mocks.getMockFunction().mockImplementation(mockTimers.clearTimers),e.mockGetTimersCount=mocks.getMockFunction().mockImplementation(mockTimers.getTimersCount)},module.exports.uninstallMockTimers=function(e){e.setTimeout=e._originalTimeouts.setTimeout,e.clearTimeout=e._originalTimeouts.clearTimeout,e.setInterval=e._originalTimeouts.setInterval,e.clearInterval=e._originalTimeouts.clearInterval,e._originalTimeouts=void 0,e.mockRunTimersOnce=void 0,e.mockRunTimersToTime=void 0,e.mockRunTimersRepeatedly=void 0,e.mockClearTimers=void 0,e.mockGetTimersCount=void 0};
//# sourceMappingURL=mock-timers.js.map